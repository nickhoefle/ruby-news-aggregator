<head>
  <%= stylesheet_link_tag 'application' %>
</head>

<!--FUNCTION FOR RESIZING IMAGES -->
<script>
  function adjustImageSize(image, size) {
    if (image.style.width === size) {
      image.style.width = ""; // Revert to original size
      image.style.height = ""; // Revert to original size
    } else {
      image.style.width = size;
      image.style.height = "auto"; // Adjust height proportionately
    }
  }
</script>

<!-- LOGGED IN / SIGN IN / SIGN UP / BLOCKED SOURCES SECTION -->
<% if signed_in? %>
  <p>Logged in as: <%= current_user.email %></p>
  <%= button_to "Sign Out", sign_out_path, method: :delete %>
<% else %>
  <%= link_to 'Sign In', sign_in_path %>
  <%= link_to 'Sign Up', sign_up_path %>
<% end %>

<h2>Blocked Sources</h2>
<%= form_tag update_blocked_sources_path, method: :post do %>
  <% @sources.each do |source| %>
    <label>
      <%= check_box_tag "blocked_sources[]", source, current_user.source_blocked?(source) %>
      <%= source %>
    </label>
  <% end %>
  <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
  <%= submit_tag "Save" %>
<% end %>

<!-- COLUMNS -->
<div id="col-container">
  <div id="far-left-col">
    <h2 class="lean">Left</h2>
  </div>

  <div id="left-col">
    <h2 class="lean">Center-Left</h2>
  </div>

  <div id="center-col">
    <h2 class="lean">Center</h2>
    <ul class="articles-list">
      <% @thehill_items.take(3).each do |item| %>
        <% unless current_user.source_blocked?('thehill') %>
          <li>
            <div class="source-and-headline-container">
              <% if item[:channel_image_url].present? %>
                <img class="source-icon" src="<%= item[:channel_image_url] %>">
              <% end %>
              <h3 class="headline">
                <a href="<%= item[:link] %>"><%= item[:title] %></a>
              </h3>
            </div>
            <div class="article-image-container">
              <img class="resizable-image" src="<%= item[:image_url] %>" onclick="adjustImageSize(this, '100%')">
            </div>
          </li>
        <% end %>
      <% end %>
    </ul>
</div>

  <div id="right-col">
    <h2 class="lean">Center-Right</h2>
    <ul class="articles-list">
      <% @foxbusiness_items.take(3).each do |item| %>
        <% unless current_user.source_blocked?('foxbusiness') %>
          <li>
            <div class="source-and-headline-container">
              <% if item[:channel_image_url].present? %>
                <img class="source-icon" src="<%= item[:channel_image_url] %>">
              <% end %>
              <h3 class="headline">
                <a href="<%= item[:link] %>"><%= item[:title] %></a>
              </h3>
            </div>
            <div class="article-image-container">
              <img class="resizable-image" src="<%= item[:image_url] %>" onclick="adjustImageSize(this, '100%')">
            </div>
          </li>
        <% end %>
      <% end %>
    </ul>
  </div>

  <div id="far-right-col">
    <h2 class="lean">Right</h2>
  </div>
</div>





<h2>Fox Business</h2>
<ul>
  <% @foxbusiness_items.each do |item| %>
    <% unless current_user.source_blocked?('foxbusiness') %>
      <li>
        <h3><%= item[:title] %></h3>
        <img height="90px" src="<%= item[:image_url] %>" alt="Image">
        <p><%= item[:description] %></p>
        <p>Published: <%= item[:pub_date] %></p>
        <a href="<%= item[:link] %>">Read More</a>
      </li>
    <% end %>
  <% end %>
</ul>

